{"version":3,"sources":["../src/tabs.js"],"names":["define","$","init","insertTabIndex","element","tabtabindex","attr","each","tabnav","document","keyup","e","code","keyCode","which","focused","indexOf","click","find","add2tab","tabnum","sectionid","sectionnum","replace","length","save2tab","tabid","courseid","ajax","url","type","data","M","cfg","sesskey","success","result","console","log","setNumsectionsCookie","on","numSections","sessionStorage","setItem","escapeHtml","text","map","m","doTheTruncate","tab","origTabTitle","shortTabTitle","html","truncateTabname","tabNameLimit","substr","String","fromCharCode","hasClass","truncateAllTabnames","doTheExpand","dataValue","expandTabname","changeTab","target","origSectionname","theSectionname","parent","append","clone","addClass","hide","newSectionname","showTabHint","require","str","getTheString","get_string","when","done","theString","remove","theAppendix","split","hideTabHint","removeClass","restoreTab","theBackup","theTab","show","tabClick","sections","sectionArray","clickedTabName","index","value","visibleSections","hiddenSections","visibleBlocks","visibleAssessmentInfo","genericTitle","initFunctions","first","firstSectionId","tabMove","closest","substring","activeTabId","countableSections","moveOntop","moveInline","dropdownToggle","tabArray","trackIds","tabname","inArray","trim","push","tabnr","newMenuText","toggleAvailiability","activeTab","followTabUrl","foundIt","handleTabDropEvent","event","ui","courseFormatName","draggedTab","draggable","targetTab","draggedTabId","targetTabId","zwischenspeicher","tabSeqA","includes","tabSeq","join","ready","cursor","stack","revert","droppable","accept","hoverClass","drop","originCourseid","getItem","removeItem","i"],"mappings":"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","sourcesContent":["define(['jquery', 'jqueryui'], function($) {\n    /* eslint no-console: [\"error\", { allow: [\"log\", \"warn\", \"error\"] }] */\n    return {\n        init: function() {\n\n// ---------------------------------------------------------------------------------------------------------------------\n            /**\n             * Inserts the tabindex from any active tab to its visible sections to make sure they will follow\n             * directly after the tab when navigating using the TAB key\n             *\n             * @param {Object} element\n             */\n            function insertTabIndex(element) {\n                var tabtabindex = element.attr('tabindex');\n                if (tabtabindex > 0) {\n                    $('.section.main:visible').each(function() {\n                        $(this).attr('tabindex', tabtabindex);\n                    });\n                }\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            /**\n             * Supporting navigation using the keyboard\n             */\n            function tabnav() {\n                $(document).keyup(function(e) {\n                    var code = e.keyCode || e.which;\n                    var focused = $(':focus');\n                    // When using the TAB key to navigate the page actually click a tab when in focus to reveal its sections\n\n                    if (code == 13) { // ENTER key pressed\n                        // Click a focused tab by pressing ENTER\n                        if (typeof focused.attr('id') !== 'undefined' && focused.attr('id').indexOf(\"tab\") > -1) {\n                            focused.click();\n                        }\n                        // Toggle a focused section by pressing ENTER\n                        if (typeof focused.attr('id') !== 'undefined' && focused.attr('id').indexOf(\"section\") > -1) {\n                            focused.find('.toggler:visible').click();\n                        }\n                    }\n                });\n            }\n\n// ---------------------------------------------------------------------------------------------------------------------\n            /**\n             * Remove the section id and section number from any tab\n             *\n             * @param {number} tabnum\n             * @param {number} sectionid\n             * @param {number} sectionnum\n             */\n            function add2tab(tabnum, sectionid, sectionnum) {\n                $(\".tablink\").each(function() {\n                    $(this).attr('sections', $(this).attr('sections').replace(\",\" + sectionid, \"\"));\n                    $(this).attr('sections', $(this).attr('sections').replace(sectionid + \",\", \"\"));\n                    $(this).attr('sections', $(this).attr('sections').replace(sectionid, \"\"));\n\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(\",\" + sectionnum, \"\"));\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum + \",\", \"\"));\n                    $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum, \"\"));\n                });\n                // Add the sectionid to the new tab\n                if (tabnum > 0) { // No need to store section ids for tab 0\n                    if ($(\"#tab\" + tabnum).attr('sections').length === 0) {\n                        $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + sectionid);\n                    } else {\n                        $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + \",\" + sectionid);\n                    }\n                    if ($(\"#tab\" + tabnum).attr('section_nums').length === 0) {\n                        $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + sectionnum);\n                    } else {\n                        $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + \",\" + sectionnum);\n                        // X console.log('---> section_nums: '+$(\"#tab\"+tabnum).attr('section_nums'));\n                    }\n                }\n            }\n\n            /**\n             * Save the new tab data to the database\n             *\n             * @param {number} tabid\n             */\n            function save2tab(tabid) {\n                var courseid = $('#courseid').attr('courseid');\n                $.ajax({\n                    url: \"format/topics2/ajax/update_tab_settings.php\",\n                    type: \"POST\",\n                    data: {\n                        'courseid': courseid,\n                        'tabid': tabid,\n                        'sections': $(\"#\" + tabid).attr('sections'),\n                        'sectionnums': $(\"#\" + tabid).attr('section_nums'),\n                        'sesskey': M.cfg.sesskey\n                    },\n                    success: function(result) {\n                        if (result !== '') {\n                            console.log(result);\n                        }\n                    }\n                });\n            }\n\n            /**\n             * Store the number of current sections in a cookie - so we know how many have been added later\n             */\n            var setNumsectionsCookie = function() {\n                $('#changenumsections').on('click', function() {\n                    var numSections = $('.section.main').length;\n                    sessionStorage.setItem('numSections', numSections);\n                });\n            };\n\n            /**\n             * Escape some HTML characters\n             *\n             * @param {string} text\n             * @returns {*}\n             */\n            var escapeHtml = function(text) {\n                var map = {\n                    '&': '&amp;',\n                    '<': '&lt;',\n                    '>': '&gt;',\n                    '\"': '&quot;',\n                    \"'\": '&#039;'\n                };\n\n                return text.replace(/[&<>\"']/g, function(m) {\n                    return map[m];\n                });\n            };\n\n            /**\n             * When a limit for the tabname is set expand the name of the given tab to the original\n             *\n             * @param {Object} tab\n             * @param {string} origTabTitle\n             * @param {string} shortTabTitle\n             */\n            var doTheTruncate = function(tab, origTabTitle, shortTabTitle) {\n                if ($('.inplaceeditingon').length === 0) { // Don't do this while editing the tab name\n                    if ($('.inplaceeditable').length > 0) { // We are in edit mode...\n                        tab.find('a').html(tab.find('a').html().replace(escapeHtml(origTabTitle), shortTabTitle));\n                    } else {\n                        tab.html(tab.html().replace(escapeHtml(origTabTitle), shortTabTitle));\n                    }\n                }\n            };\n\n           /**\n             * When a limit for the tabname is set truncate the name of the given tab to limit\n             *\n             * @param {Object} tab\n             */\n            var truncateTabname = function(tab) {\n                if ($('.limittabname').length > 0) {\n                    var tabNameLimit = $('.limittabname').attr('value');\n                    var origTabTitle = tab.attr('tab_title');\n                    if (origTabTitle.length > tabNameLimit) {\n                        var shortTabTitle = origTabTitle.substr(0, tabNameLimit) + String.fromCharCode(8230);\n                        if (tab.hasClass('tabsectionname')) { // A sectionname as tabname\n                            tab.html(shortTabTitle);\n                        } else {\n                            doTheTruncate(tab, origTabTitle, shortTabTitle);\n                        }\n                    }\n                }\n            };\n\n            /**\n             * Truncate all tabnames\n             */\n            var truncateAllTabnames = function() {\n                if ($('.limittabname').length > 0) {\n                    $('.tablink').each(function() {\n                        truncateTabname($(this));\n                    });\n                }\n            };\n\n            /**\n             * When a limit for the tabname is set expand the name of the given tab to the original\n             *\n             * @param {Object} tab\n             * @param {string} origTabTitle\n             * @param {number} tabNameLimit\n             */\n            var doTheExpand = function(tab, origTabTitle, tabNameLimit) {\n                if ($('.inplaceeditingon').length === 0) { // Don't do this while editing the tab name\n                    var shortTabTitle = origTabTitle.substr(0, tabNameLimit) + String.fromCharCode(8230);\n                    if ($('.inplaceeditable').length > 0) { // We are in edit mode...\n\n                        // Make sure that tab-tile matches data-value after the tab title was edited\n                        var dataValue = tab.find('.inplaceeditable').attr('data-value');\n                        if (origTabTitle !== dataValue) { // They do NOT match so make them\n                            tab.attr('tab_title', dataValue);\n                            origTabTitle = dataValue;\n                            shortTabTitle = origTabTitle.substr(0, tabNameLimit) + String.fromCharCode(8230);\n                        }\n\n                        tab.find('a').html(tab.find('a').html().replace(escapeHtml(shortTabTitle), origTabTitle));\n                    } else {\n                        tab.html(tab.html().replace(escapeHtml(shortTabTitle), origTabTitle));\n                    }\n                }\n            };\n\n            /**\n             * When a limit for the tabname is set expand the name of the given tab to the original\n             *\n             * @param {Object} tab\n             */\n            var expandTabname = function(tab) {\n\n                if ($('.limittabname').length > 0) {\n                    var tabNameLimit = $('.limittabname').attr('value');\n                    var origTabTitle = tab.attr('tab_title');\n\n                    if (origTabTitle.length > tabNameLimit) {\n                        if (tab.hasClass('tabsectionname')) { // A sectionname as tabname\n                            tab.html(origTabTitle);\n                        } else {\n                            doTheExpand(tab, origTabTitle, tabNameLimit);\n                        }\n                    }\n                }\n            };\n\n            /**\n             * When a single section is shown under a tab use the section name as tab name\n             *\n             * @param {Object} tab\n             * @param {Object} target\n             */\n            var changeTab = function(tab, target) {\n                console.log('single section in tab: using section name as tab name');\n\n                // Replace the tab name with the section name\n                var origSectionname = target.find('.sectionname:not(.hidden)');\n                if ($('.tabname_backup:visible').length > -1) {\n                    var theSectionname = target.attr('aria-label');\n                    tab.parent().append(tab.clone().addClass('tabname_backup').hide()); // Create a hidden clone of tab name\n                    tab.html(theSectionname).addClass('tabsectionname');\n                    tab.attr('tab_title', theSectionname);\n\n                    // Hide the original sectionname when not in edit mode\n                    if ($('.inplaceeditable').length === 0) {\n                        origSectionname.hide();\n                        target.find('.sectionhead').hide();\n                    } else {\n                        target.find('.toggler').addClass('toggler_edit_only').hide();\n                        origSectionname.addClass('edit_only');\n                    }\n\n                }\n            };\n\n            /**\n             * A section name is updated...\n             */\n            $(\".section\").on('updated', function() {\n                var newSectionname = $(this).find('.inplaceeditable').attr('data-value');\n                $(this).attr('aria-label', newSectionname);\n                $('.tablink.active').click();\n            });\n\n            /**\n             * Show a hint for a tab\n             *\n             * @param {Object} tab\n             */\n            var showTabHint = function(tab) {\n                var tabid = tab.attr('id');\n                tab.addClass('hidden-tab');\n\n                // Get the hint string and show the hint icon next to the tab name\n                require(['core/str'], function(str) {\n                    var getTheString = str.get_string('hidden_tab_hint', 'format_qmultopics');\n                    $.when(getTheString).done(function(theString) {\n                        tab.find('#not-shown-hint-' + tabid).remove();\n                        var theAppendix = '<i id=\"not-shown-hint-' + tabid + '\" class=\"fa fa-info\" title=\"' + theString + '\"></i>';\n                        if (tab.attr('sections').split(',').length == 1\n                            && $('.single_section_tabs').length > 0) { // If there is a single topic\n                            tab.html(tab.html() + ' ' + theAppendix);\n                        } else if ($('.tablink .fa-pencil').length > 0) { // When in edit mode ...\n                            tab.find('.inplaceeditable').append(theAppendix);\n                        } else {\n                            tab.html(tab.html() + ' ' + theAppendix);\n                        }\n                    });\n                });\n            };\n\n            /**\n             * Hide the hint for a tab\n             *\n             * @param {Object} tab\n             */\n            var hideTabHint = function(tab) {\n                var tabid = tab.attr('id');\n                tab.removeClass('hidden-tab');\n                $('#not-shown-hint-' + tabid).remove();\n            };\n\n            /**\n             * Restore the tab name\n             *\n             * @param {Object} tab\n             */\n            var restoreTab = function(tab) {\n                // Restore the tab name from the backup\n                var theBackup = tab.parent().find('.tabname_backup');\n                var theTab = tab.parent().find('.tabsectionname').removeClass('tabsectionname');\n                theTab.html(theBackup.html());\n                theBackup.remove();\n\n                // Reveal the original sectionname\n                $('.sectionname').removeClass('edit_only').show();\n\n                $('.hidden.sectionname').show();\n                $('.section-handle').show();\n                $('.toggler_edit_only').removeClass('toggler_edit_only').show();\n\n                 console.log('--> restoring section headline ');\n            };\n\n            /**\n             * React to a clicked tab\n             */\n            var tabClick = function() {\n                $(\".tablink\").on('click', function() {\n                    var courseid = $('#courseid').attr('courseid');\n                    var tabid = $(this).attr('id');\n                    var sections = $(this).attr('sections');\n                    var sectionArray = sections.split(\",\");\n                    // Make this an active tab\n                    $(\".tablink.active\").removeClass(\"active\"); // First remove any active class from tabs\n                    $(this).addClass('active'); // Then add the active class to the clicked tab\n\n                    // Store the course ID and the ID of the active tab in cookies\n                    sessionStorage.setItem('courseid', courseid);\n                    sessionStorage.setItem('tabid', tabid);\n\n                    // If the tab titles are limited - limit them and expand only the active\n                    if ($('.limittabname').length > 0) {\n                        truncateAllTabnames();\n                        expandTabname($(this));\n                    }\n\n                    var clickedTabName;\n                    if ($(this).find('.inplaceeditable-text')) {\n                        clickedTabName = $(this).find('.inplaceeditable-text').attr('data-value');\n                    }\n                    if (typeof clickedTabName == 'undefined') {\n                        clickedTabName = $(this).html();\n                    }\n                    console.log('=====> Clicked tab \"' + clickedTabName + '\":');\n\n                    // Hide the content of the assessment info block tab\n                    $('.assessment_info_block_content').hide();\n\n                    $(\".tablink.active\").removeClass(\"active\");\n                    $(\".modulecontent\").addClass(\"active\");\n\n                    $('#content_assessmentinformation_area').hide();\n                    $('#assessment_information_summary').hide();\n                    $('#assessment_information_area').hide();\n\n                    if (tabid === 'tab0') { // Show all sections - then hide each section shown in other tabs\n                        $(\"#changenumsections\").show();\n                        $(\"li.section\").removeClass('hidden').show();\n                        $(\".topictab:visible\").each(function() {\n                            if ($(this).attr('sections').length > 0) {\n                                // If any split sections into an array, loop through it and hide section with the found ID\n                                $.each($(this).attr('sections').split(\",\"), function(index, value) {\n                                    var target = $(\".section[section-id='\" + value + \"']\");\n                                    target.addClass('hidden').hide();\n                                    console.log(\"--> hiding section \" + value);\n                                });\n                            }\n                        });\n                    } else if (tabid === 'tab_assessment_information') { // Show the Assessment Information as new tab\n                        $(\"li.section\").addClass('hidden').hide();\n                        $(\"li.section.hidden\").addClass(\"hiding\");\n                        $(\"li.section.hiding\").removeClass(\"hidden\");\n\n                        $('#content_assessmentinformation_area').show();\n                        if ($('.merge_assessment_info').length > 0) {\n                            $('#assessment_information_summary').show();\n                            $('#assessment_information_area').show();\n                        }\n                    } else if (tabid === 'tab_assessment_info_block') { // Show the Assessment Info Block on the main stage\n                        $(\"li.section\").addClass('hidden').hide();\n                        $(\"#changenumsections\").hide();\n                        $(\"li.section.hidden\").addClass(\"hiding\");\n                        $(\"li.section.hiding\").removeClass(\"hidden\");\n\n                        $('#assessment_information_summary').show();\n                        $('#assessment_information_area').show();\n                    } else { // Hide all sections - then show those found in sectionArray\n                        $(\"#changenumsections\").show();\n                        $(\"li.section\").addClass('hidden').hide();\n                        $.each(sectionArray, function(index, value) {\n                            var target = $(\".section[section-id='\" + value + \"']\");\n                            target.removeClass('hidden').show();\n                            console.log(\"--> showing section \" + value);\n                        });\n                    }\n\n                    // Show section-0 always when it should be shown always\n                    $('#ontop_area #section-0').removeClass('hidden').show();\n\n                    var visibleSections = $('li.section:visible').length;\n                    var hiddenSections = $('li.section:visible').find('.ishidden').length;\n                    var visibleBlocks = $('#modulecontent').find('.block:visible');\n                    var visibleAssessmentInfo = $('#content_assessmentinformation_area:visible').length;\n\n                    if ($('.section0_ontop').length > 0) {\n                        console.log('section0 is on top - so reducing the number of visible sections for this tab by 1');\n                        visibleSections--;\n                    }\n\n                    if (visibleSections < 1 && visibleBlocks.length === 0 && visibleAssessmentInfo === 0) {\n                        console.log('tab with no visible sections - hiding it');\n                        $(this).parent().hide();\n\n                        // Restoring generic tab name\n                        var genericTitle = $(this).attr('generic_title');\n                        $.ajax({\n                            url: \"format/topics2/ajax/update_tab_name.php\",\n                            type: \"POST\",\n                            data: {\n                                'courseid': courseid,\n                                'tabid': tabid,\n                                'tab_name': genericTitle,\n                                'sesskey': M.cfg.sesskey\n                            },\n                            success: function(result) {\n                                if (result !== '') {\n                                    console.log('Reset name of tab ID ' + tabid + ' to \"' + result + '\"');\n                                    $('[data-itemid=' + result + ']').attr('data-value', genericTitle).\n                                    find('.quickeditlink').html(genericTitle);\n\n                                    // Re-instantiate the just added DOM elements\n                                    initFunctions();\n                                }\n                            }\n                        });\n                    } else {\n                        console.log('tab with visible sections - showing it');\n                        $(this).parent().show();\n                    }\n\n                    // If option is set and when a tab other than tab 0 shows a single section perform some visual tricks\n                    if ($('.single_section_tabs').length > 0\n                        && $(this).attr('sections').split(',').length == 1\n                        && tabid !== 'tab0') {\n                        var target = $('li.section:visible').first();\n\n                        // If section0 is shown always on top ignore the first visible section and use the 2nd\n                        if ($('.section0_ontop').length > 0) {\n                            target = $('li.section:visible:eq(1)');\n                        }\n                        var firstSectionId = target.attr('id');\n\n                        if (visibleSections - hiddenSections <= 1\n                            && firstSectionId !== 'section-0'\n                            && $(this).attr('generic_title').indexOf('Tab') >= 0 // Do this only for original tabs\n                        ) {\n                            changeTab($(this), target);\n                            // Make sure the content is un-hidden\n                            target.find('.toggle_area').removeClass('hidden').show();\n                        } else if ($('.inplaceeditable').length > 0 && firstSectionId !== 'section-0') {\n                            restoreTab($(this));\n                        }\n                    }\n\n                    // If all visible sections are hidden for students the tab is hidden for them as well\n                    // in this case mark the tab for admins so they are aware\n                    if (visibleSections <= hiddenSections && visibleBlocks.length === 0 && visibleAssessmentInfo === 0) {\n                        showTabHint($(this));\n                    } else {\n                        hideTabHint($(this));\n                    }\n\n                    // If tab0 is alone hide it\n                    if (tabid === 'tab0' && $('.tabitem:visible').length === 1) {\n                        $('.tabitem').hide();\n                    }\n                    // This will make sure tab navigation goes from tab to its sections and then on to the next tab\n                    insertTabIndex($(this));\n                });\n            };\n\n            /**\n             * Moving a section to a tab by menu\n             */\n            var tabMove = function() {\n                $(\".tab_mover\").on('click', function() {\n                    var tabnum = $(this).attr('tabnr'); // This is the tab number where the section is moved to\n                    var sectionid = $(this).closest('li.section').attr('section-id');\n                    var sectionnum = $(this).closest('li.section').attr('id').substring(8);\n\n                    var activeTabId = $('.topictab.active').first().attr('id');\n\n                    if (typeof activeTabId == 'undefined') {\n                        activeTabId = 'tab0';\n                    }\n\n                    // Remove the section id and section number from any tab\n                    $(\".tablink\").each(function() {\n                        $(this).attr('sections', $(this).attr('sections').replace(\",\" + sectionid, \"\"));\n                        $(this).attr('sections', $(this).attr('sections').replace(sectionid + \",\", \"\"));\n                        $(this).attr('sections', $(this).attr('sections').replace(sectionid, \"\"));\n\n                        $(this).attr('section_nums', $(this).attr('section_nums').replace(\",\" + sectionnum, \"\"));\n                        $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum + \",\", \"\"));\n                        $(this).attr('section_nums', $(this).attr('section_nums').replace(sectionnum, \"\"));\n                    });\n                    // Add the sectionid to the new tab\n                    if (tabnum > 0) { // No need to store section ids for tab 0\n                        if ($(\"#tab\" + tabnum).attr('sections').length === 0) {\n                            $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + sectionid);\n                        } else {\n                            $(\"#tab\" + tabnum).attr('sections', $(\"#tab\" + tabnum).attr('sections') + \",\" + sectionid);\n                        }\n                        if ($(\"#tab\" + tabnum).attr('section_nums').length === 0) {\n                            $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + sectionnum);\n                        } else {\n                            $(\"#tab\" + tabnum).attr('section_nums', $(\"#tab\" + tabnum).attr('section_nums') + \",\" + sectionnum);\n                        }\n                    }\n                    $(\"#tab\" + tabnum).click();\n                    $('#' + activeTabId).click();\n\n                    // Restore the section before moving it in case it was a single\n                    restoreTab($('#tab' + tabnum));\n\n                    // If the last section of a tab was moved click the target tab\n                    // otherwise click the active tab to refresh it\n                    var countableSections = $('li.section:visible').length - ($(\"#ontop_area\").hasClass('section0_ontop') ? 1 : 0);\n                    if (countableSections > 0 && $('li.section:visible').length >= countableSections) {\n                        $(\"#tab\" + tabnum).click();\n                        $('#' + activeTabId).click();\n                    } else {\n                        $(\"#tab\" + tabnum).click();\n                        $('#' + activeTabId).parent().hide();\n                    }\n                });\n            };\n\n            /**\n             * Moving section0 to the ontop area\n             */\n            var moveOntop = function() {\n                $(\".ontop_mover\").on('click', function() {\n                    $(\"ul#ontop_area\").append($(this).closest('.section')).addClass('section0_ontop');\n                    $(\"#section-0\").removeClass('main');\n                });\n            };\n\n            /**\n             * Moving section0 back into line with others\n             */\n            var moveInline = function() {\n                $(\".inline_mover\").on('click', function() {\n                    var sectionid = $(this).closest('.section').attr('section-id');\n                    $(\"#inline_area\").append($(this).closest('.section'));\n                    $(\"#section-0\").addClass('main');\n                    // Remove the 'section0_ontop' class\n                    $('.section0_ontop').removeClass('section0_ontop');\n                    // Find the former tab for section0 if any and click it\n                    $(\".tablink\").each(function() {\n                        if ($(this).attr('sections').indexOf(sectionid) > -1) {\n                            $(this).click();\n                            return false;\n                        }\n                        return false;\n                    });\n                });\n            };\n\n            /**\n             * A section edit menu is clicked\n             * Hide the the current tab from the tab move options of the section edit menu\n             * If this is section0 do some extra stuff\n             */\n            var dropdownToggle = function() {\n                $(\".menubar\").on('click', function() {\n                    if ($(this).parent().parent().hasClass('section_action_menu')) {\n                        var sectionid = $(this).closest('.section').attr('id');\n                        $('#' + sectionid + ' .tab_mover').show(); // 1st show all options\n\n                        // Replace all tabnames with the current names shown in tabs\n                        // Get the current tab names\n                        var tabArray = [];\n                        var trackIds = []; // Tracking the tab IDs so to use each only once\n                        $('.tablink').each(function() {\n                            if (typeof $(this).attr('id') !== 'undefined') {\n                                var tabname = '';\n                                var tabid = $(this).attr('id').substr(3);\n                                if ($(this).hasClass('tabsectionname')) {\n                                    tabname = $(this).html();\n                                } else {\n                                    tabname = $(this).find('.inplaceeditable').attr('data-value');\n                                }\n                                if ($.inArray(tabid, trackIds) < 0) {\n                                    // If this is a hidden tab remove all garnish from the name\n                                    if ($(this).hasClass('hidden-tab')) {\n                                        tabname = $(this).find('a').clone();\n                                        tabname.find('span.quickediticon').remove();\n                                        tabname = $.trim(tabname.html());\n                                    }\n                                    tabArray[tabid] = tabname;\n                                    trackIds.push(tabid);\n                                }\n                            }\n                        });\n\n                        // Updating menu options with current tab names\n                        $(this).parent().find('.tab_mover').each(function() {\n                            var tabnr = $(this).attr('tabnr');\n                            var newMenuText = 'To Tab ' +\n                                (tabArray[tabnr] === '' || tabArray[tabnr] === 'Tab ' + tabnr ? tabnr : '\"' + tabArray[tabnr] +\n                                ((tabArray[tabnr] === 'Tab ' + tabnr || tabnr === '0') ? '\"' : '\" (Tab ' + tabnr + ')'));\n\n                            $(this).find('.menu-action-text').html(newMenuText);\n                        });\n                        if (sectionid === 'section-0') {\n                            if ($('#ontop_area.section0_ontop').length === 1) { // If section0 is on top don't show tab options\n                                $(\"#section-0 .inline_mover\").show();\n                                $(\"#section-0 .tab_mover\").addClass('tab_mover_bak').removeClass('tab_mover').hide();\n                                $(\"#section-0 .ontop_mover\").hide();\n                            } else {\n                                $(\"#section-0 .inline_mover\").hide();\n                                $(\"#section-0 .tab_mover_bak\").addClass('tab_mover').removeClass('tab_mover_bak').show();\n                                $(\"#section-0 .ontop_mover\").show();\n                            }\n                        } else if (typeof $('.tablink.active').attr('id') !== 'undefined') {\n                            var tabnum = $('.tablink.active').attr('id').substring(3);\n                            $('#' + sectionid + ' .tab_mover[tabnr=\"' + tabnum + '\"]').hide(); // Then hide the one not needed\n                        }\n                        if ($('.tablink:visible').length === 0) {\n                            $('#' + sectionid + ' .tab_mover[tabnr=\"0\"]').hide();\n                        }\n                    }\n                });\n            };\n\n            /**\n             * A section edit menu is clicked - to hide or show a section to students\n             */\n            var toggleAvailiability = function() {\n                $(\".section-actions .menubar .action-menu-trigger .dropdown .dropdown-menu .dropdown-item\").on('click', function() {\n                    var activeTab = $('.tablink.active');\n                    var visibleSections = $('li.section:visible').length;\n                    var hiddenSections = $('li.section:visible').find('.ishidden').length;\n                    var visibleBlocks = $('#modulecontent').find('.block:visible');\n                    var visibleAssessmentInfo = $('#content_assessmentinformation_area:visible').length;\n\n                    if ($(this).find('.menu-action-text').html().indexOf(\"Hide\") >= 0) {\n                        if (activeTab.attr('id') != undefined\n                            && visibleSections <= hiddenSections + $('.section0_ontop').length + 1\n                            && visibleBlocks.length === 0\n                            && visibleAssessmentInfo === 0\n                        ) {\n                            showTabHint(activeTab);\n                        }\n                    }\n                    if ($(this).find('.menu-action-text').html().indexOf(\"Show\") >= 0) {\n                        if (activeTab.attr('id') != undefined) {\n                            hideTabHint(activeTab);\n                        }\n                    }\n                });\n            };\n\n            /**\n             * A direct URL to a specific section is clicked - reveal the corresponding tab\n             */\n            var followTabUrl = function() {\n                $(\"a\").click(function() {\n                    if ($(this).attr('href') !== '#' && typeof $(this).attr('href') !== 'undefined') {\n                        var sectionnum = $(this).attr('href').split('#')[1];\n                        // If the link contains a sectionnum (e.g. is NOT undefined) find and click the corresponding tab\n                        if (typeof sectionnum !== 'undefined') {\n                            // Find the corresponding section ID for the section number we found\n                            var sectionid = $('#' + sectionnum).attr('section-id');\n                            // Find the tab to which the section ID is related\n                            var foundIt = false;\n                            $('.tablink').each(function() {\n                                if ($(this).attr('sections').indexOf(sectionid) > -1) {\n                                    $(this).click();\n                                    foundIt = true;\n                                    return false;\n                                }\n                            });\n                            // If it has not been found related to any tab it has to be under tab0 - so click that\n                            if (!foundIt) {\n                                $('#tab0').click();\n                            }\n                        }\n                    }\n                });\n            };\n\n            /**\n             * Load all required functions above\n             */\n            var initFunctions = function() {\n                tabClick();\n                tabMove();\n                moveOntop();\n                moveInline();\n                dropdownToggle();\n                setNumsectionsCookie();\n                tabnav();\n                toggleAvailiability();\n                followTabUrl();\n            };\n\n            /**\n             * What to do if a tab has been dropped onto another\n             *\n             * @param {Object} event\n             * @param {Object} ui\n             */\n            var handleTabDropEvent = function(event, ui) {\n                var courseFormatName = $(document).find('.course_format_name').html();\n                var draggedTab = ui.draggable.find('.topictab').first();\n                var targetTab = $(this).find('.topictab').first();\n\n                // For development purposes only - not used in production environments\n                var draggedTabId = draggedTab.attr('id');\n                var targetTabId = targetTab.attr('id');\n                console.log('The tab with ID \"' + draggedTabId + '\" was dropped onto tab with the ID \"' + targetTabId + '\"');\n\n                // Swap both tabs\n                var zwischenspeicher = draggedTab.parent().html();\n                draggedTab.parent().html(targetTab.parent().html());\n                targetTab.parent().html(zwischenspeicher);\n\n                // Re-instantiate the clickability for the just added DOM elements\n                initFunctions();\n\n                // Get the new tab sequence and write it back to format options\n                var tabSeqA = [];\n\n                // Get the id of each tab according to their position (left to right)\n                $('.tablink').each(function() {\n                    var tabid = $(this).attr('id');\n                    if (typeof tabid !== 'undefined') {\n                        if (!tabSeqA.includes(tabid)) {\n                            tabSeqA.push(tabid);\n                        }\n                    }\n                });\n\n                // Implode the array to a string\n                var tabSeq = tabSeqA.join();\n\n                // Finally call php to write the data\n                var courseid = $('#courseid').attr('courseid');\n                $.ajax({\n                    url: \"format/topics2/ajax/update_tab_seq.php\",\n                    type: \"POST\",\n                    data: {\n                        'courseid': courseid,\n                        'tab_seq': tabSeq,\n                        'course_format_name': courseFormatName,\n                        'sesskey': M.cfg.sesskey\n                    },\n//                    Success: function() {\n                    success: function(result) {\n                        console.log('the new tab sequence: ' + result);\n                    }});\n            };\n\n            /**\n             * Document is ready\n             */\n            $(document).ready(function() {\n                console.log('=================< topics2/tabs.js >=================');\n                initFunctions();\n\n                // Move the Assessment Information block when active\n                if ($('.block_assessment_information').length > 0) {\n                    // Move the block into it's area in the main region\n                    $('#assessment_information_area').append($('.block_assessment_information'));\n                    // If the AI block is the only one remove the 'has-blocks' class from the main region\n                    if ($('.block').length === $('.block_assessment_information').length) {\n                        $('#region-main').removeClass('has-blocks');\n                    }\n                }\n\n                // Show the edit menu for section-0\n                $(\"#section-0 .right.side\").show();\n\n                // Truncate tab names when option is set\n                truncateAllTabnames();\n\n                // Make tabs draggable when in edit mode (the pencil class is present)\n                if ($('.inplaceeditable').length > 0) {\n\n                    $('.topictab').parent().draggable({\n                        cursor: 'move',\n                        stack: '.tabitem', // Make sure the dragged tab is always on top of others\n                        revert: true,\n                    });\n                    $('.topictab').parent().droppable({\n                        accept: '.tabitem',\n                        hoverClass: 'hovered',\n                        drop: handleTabDropEvent,\n                    });\n                }\n\n                // Check for courseid and tab cookies\n                // Only when the page is reloaded for the same course check for a tab cookie and delete it otherwise\n                var courseid = $('#courseid').attr('courseid');\n                var originCourseid = sessionStorage.getItem('courseid');\n                var tabid = null;\n                if (originCourseid !== null && originCourseid == courseid) {\n                    tabid = sessionStorage.getItem('tabid');\n                } else {\n                    sessionStorage.removeItem('courseid');\n                    sessionStorage.removeItem('tabid');\n                }\n\n                // Click all tabs once\n                $('#tab0').click();\n                $('.tablink:visible').click();\n\n                // If there are visible tabs click them all once to potentially reveal any section names as tab names\n                if ($(\".topictab:visible\").length > 0) {\n                    if (tabid !== null && tabid != 'tab0') {\n                        // If a 'numSections' cookie is set the changenumsections url has been clicked\n                        // while the particular tab was active and we have returned here\n                        // if the tabid is other than tab0 move the newly added sections to that tab\n\n                        // Get the number of sections before new ones were added from another cookie\n                        var numSections = sessionStorage.getItem('numSections');\n                        sessionStorage.removeItem('numSections');\n                        if (numSections !== null) {\n                            // Attach all new sections to the given tab\n                            var tabnum = tabid.substring(3); // This is the tab number(!) where the section is moved to\n                            var i = 0;\n                            $('.section.main').each(function() {\n                                i = i + 1;\n                                if (i > numSections) {\n                                    // X console.log('new section id = ' + $(this).attr('id'));\n                                    var sectionid = $(this).attr('section-id');\n                                    var sectionnum = $(this).attr('id').substring(8);\n                                    add2tab(tabnum, sectionid, sectionnum);\n                                }\n                            });\n                            save2tab(tabid);\n                        }\n\n                        // Click the tab with the found tab ID\n                        $('#' + tabid).click();\n                    } else {\n                        // Click the 1st visible tab by default\n                        $('.tablink:visible').first().click();\n                    }\n                }\n\n                // If section0 is on top restrict section menu - restore otherwise\n                if ($(\"#ontop_area\").hasClass('section0_ontop')) {\n                    $(\"#section-0 .inline_mover\").show();\n                    $(\"#section-0 .tab_mover\").hide();\n                    $(\"#section-0 .ontop_mover\").hide();\n                } else {\n                    $(\"#section-0 .inline_mover\").hide();\n                    $(\"#section-0 .tab_mover\").show();\n                    $(\"#section-0 .ontop_mover\").show();\n                }\n            });\n        }\n    };\n});\n"],"file":"tabs.min.js"}
